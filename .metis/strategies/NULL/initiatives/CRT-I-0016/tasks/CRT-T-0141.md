---
id: implement-spritepatch-patch
level: task
title: "Implement SpritePatch - patch backdrop sprite properties"
short_code: "CRT-T-0141"
created_at: 2025-12-29T18:52:01.537834+00:00
updated_at: 2025-12-29T19:26:56.120008+00:00
parent: CRT-I-0016
blocked_by: []
archived: false

tags:
  - "#task"
  - "#phase/completed"


exit_criteria_met: false
strategy_id: NULL
initiative_id: CRT-I-0016
---

# Implement SpritePatch - patch backdrop sprite properties

**Phase 5** - Sprite patching for event overrides.

## Objective

Apply SpritePatch overrides to the existing backdrop sprite, preserving its current position and motion pattern while swapping properties like image, fps, opacity.

## Acceptance Criteria

## Acceptance Criteria

## Acceptance Criteria

- [ ] SpritePatch fields apply to existing SpriteAnimationState
- [ ] `--sprite-path` swaps sprite sheet without resetting position
- [ ] `--sprite-fps` changes animation speed
- [ ] `--sprite-opacity` adjusts transparency
- [ ] `--sprite-motion-speed` adjusts motion speed (0.1 = slow, 2.0 = fast)
- [ ] Backdrop sprite continues its motion pattern (bounce, etc.)
- [ ] When override expires, original sprite properties restore

## Implementation Notes

### File: `crates/crt-renderer/src/effects/sprite.rs`

The existing `SpriteAnimationState` already has these fields. SpritePatch just temporarily overrides them:

```rust
impl SpriteAnimationState {
    pub fn apply_patch(&mut self, patch: &SpritePatch) {
        if let Some(path) = &patch.path {
            // Load new sprite sheet, keep current position
            self.load_sprite_sheet(path);
        }
        if let Some(fps) = patch.fps {
            self.fps = fps;
        }
        if let Some(opacity) = patch.opacity {
            self.opacity = opacity;
        }
        if let Some(speed) = patch.motion_speed {
            self.motion_speed = speed;
        }
    }
    
    pub fn restore_from(&mut self, original: &SpriteConfig) {
        // Restore original values when override expires
    }
}
```

### Dependencies
- CRT-T-0139 (renderer integration knows when to apply/restore)

## Status Updates

*To be added during implementation*