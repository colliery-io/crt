---
id: add-theme-submenu-to-tab-bar
level: task
title: "Add Theme submenu to tab bar context menu"
short_code: "CRT-T-0159"
created_at: 2025-12-31T14:37:49.199915+00:00
updated_at: 2025-12-31T15:46:58.774894+00:00
parent: CRT-I-0025
blocked_by: []
archived: false

tags:
  - "#task"
  - "#phase/completed"


exit_criteria_met: false
strategy_id: NULL
initiative_id: CRT-I-0025
---

# Add Theme submenu to tab bar context menu

## Parent Initiative
[[CRT-I-0025]] - Per-Window Theme Switching

## Objective

Add a "Theme" submenu to the tab bar's right-click context menu, providing an alternative discovery path for theme switching that doesn't require the menu bar.

## Acceptance Criteria

## Acceptance Criteria

## Acceptance Criteria

- [ ] Right-click on tab bar background shows context menu with "Theme >" submenu
- [ ] Submenu lists available themes from registry
- [ ] Current theme has checkmark indicator
- [ ] Selecting theme applies to current window immediately
- [ ] Reuses theme list building logic from CRT-T-0158

## Implementation Notes

### Technical Approach

The tab bar already has a context menu system in `window.rs` (via `ContextMenu` in `UiState`). We need to extend it with a theme submenu.

**Context menu structure:**
```
(right-click on tab bar)
├── New Tab
├── ─────────
├── Theme ▸
│   ├── ✓ synthwave
│   ├── nyancat
│   └── ...
├── ─────────
├── Close Tab
└── Close Other Tabs
```

**Implementation steps:**
1. Extend `ContextMenu` or context menu builder to include Theme submenu
2. Pass theme list from `ThemeRegistry` to context menu builder
3. Handle theme selection in context menu action handler
4. Dispatch to same `set_theme()` logic as Window menu

### Files to Modify
- `src/window.rs`: Extend context menu building
- `src/input/mouse.rs`: Handle theme selection from context menu

### Dependencies
- Requires CRT-T-0156 (ThemeRegistry)
- Requires CRT-T-0157 (per-window theme state)
- Should reuse patterns from CRT-T-0158 (Window menu)

### Considerations
- Context menu is rendered via custom UI, not native menu
- May need to handle submenu hover/expansion in custom renderer
- Consider if nested submenus are supported by current context menu system

## Status Updates

*To be added during implementation*