---
id: implement-cursor-styling-with
level: task
title: "Implement cursor styling with shape and color options"
short_code: "CRT-T-0043"
created_at: 2025-11-26T17:50:57.231156+00:00
updated_at: 2025-11-26T17:50:57.231156+00:00
parent: CRT-I-0008
blocked_by: []
archived: false

tags:
  - "#task"
  - "#phase/todo"


exit_criteria_met: false
strategy_id: NULL
initiative_id: CRT-I-0008
---

# Implement cursor styling with shape and color options

## Parent Initiative

[[CRT-I-0008]] - Terminal Rendering Pipeline and ANSI Color Support

## Objective

Add CSS-configurable cursor styling with support for different shapes (block, underline, bar) and custom colors. Cursor renders through the glow pipeline for effect treatment.

## Acceptance Criteria

- [ ] Parse `--cursor-color` CSS variable
- [ ] Parse `--cursor-shape` CSS variable (block, underline, bar)
- [ ] Block cursor renders as full cell (current behavior)
- [ ] Underline cursor renders as bottom 2px of cell
- [ ] Bar cursor renders as left 2px of cell
- [ ] Cursor color applied from theme
- [ ] Cursor renders through glow pipeline

## Implementation Notes

### CSS Variables

```css
--cursor-color: #f1fa8c;
--cursor-shape: block; /* block | underline | bar */
```

### CursorStyle Struct

```rust
pub enum CursorShape {
    Block,
    Underline,
    Bar,
}

pub struct CursorStyle {
    pub color: [f32; 4],
    pub shape: CursorShape,
}
```

### Technical Approach

1. Add `CursorStyle` to crt-theme
2. Parse CSS variables in theme loader
3. Modify cursor rendering in `src/window.rs`:
   - Block: full cell character (current '\u{2588}')
   - Underline: render quad at bottom of cell (height: 2px)
   - Bar: render quad at left of cell (width: 2px)
4. Apply cursor color from theme instead of hardcoded `[0.8, 0.8, 0.2, 0.8]`

### Dependencies

- CRT-T-0042 (Split rendering) - cursor must go through glow

### Files to Modify

- `crates/crt-theme/src/lib.rs` - Add CursorStyle
- `src/window.rs` - Implement shape rendering

## Status Updates

*To be added during implementation*