---
id: split-terminal-text-rendering-from
level: task
title: "Split terminal text rendering from glow pipeline"
short_code: "CRT-T-0042"
created_at: 2025-11-26T17:50:55.460070+00:00
updated_at: 2025-11-26T17:50:55.460070+00:00
parent: CRT-I-0008
blocked_by: []
archived: false

tags:
  - "#task"
  - "#phase/todo"


exit_criteria_met: false
strategy_id: NULL
initiative_id: CRT-I-0008
---

# Split terminal text rendering from glow pipeline

## Parent Initiative

[[CRT-I-0008]] - Terminal Rendering Pipeline and ANSI Color Support

## Objective

Route terminal text directly to screen without glow effects while keeping cursor rendering through the glow pipeline. This improves text readability while maintaining the CRT aesthetic for UI elements.

## Acceptance Criteria

- [ ] Terminal text renders directly to screen (bypasses glow)
- [ ] Terminal text uses ANSI colors from palette
- [ ] Cursor still renders through glow pipeline
- [ ] Tab titles still render through glow pipeline
- [ ] No visual regression for UI elements

## Implementation Notes

### Current Render Order (in `src/render.rs`)

1. Pass 1: Text to offscreen texture
2. Pass 2: Background to screen
3. Pass 3: Composite (text + glow) to screen
4. Pass 4: Tab bar to screen
5. Pass 5: Tab titles with glow

### New Render Order

1. Pass 1: Background to screen
2. Pass 2: Terminal text directly to screen (raw ANSI colors)
3. Pass 3: Cursor to offscreen texture -> glow -> composite to screen
4. Pass 4: Tab bar to screen
5. Pass 5: Tab titles with glow (unchanged)

### Technical Approach

1. Create separate `GridRenderer` for terminal text (raw) vs cursor (glowed)
2. Modify `update_text_buffer()` to populate two renderers:
   - `terminal_renderer` - all text cells
   - `cursor_renderer` - just the cursor
3. Update render pipeline in `src/render.rs`:
   - Render terminal text directly after background
   - Render cursor through existing glow composite pass

### Dependencies

- CRT-T-0040 (ANSI palette wiring) should be complete
- CRT-T-0041 (RenderPass trait) provides architecture

### Files to Modify

- `src/gpu.rs` - Add separate terminal renderer
- `src/window.rs` - Split text and cursor rendering
- `src/render.rs` - Reorder render passes

## Status Updates

*To be added during implementation*