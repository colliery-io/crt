---
id: wire-focus-events-from-winit-to
level: task
title: "Wire focus events from winit to event system"
short_code: "CRT-T-0140"
created_at: 2025-12-29T18:52:01.288851+00:00
updated_at: 2025-12-29T19:22:13.902256+00:00
parent: CRT-I-0016
blocked_by: []
archived: true

tags:
  - "#task"
  - "#phase/completed"


exit_criteria_met: false
strategy_id: NULL
initiative_id: CRT-I-0016
---

# Wire focus events from winit to event system

**Phase 3** - Window-level event detection.

## Objective

Handle winit's `WindowEvent::Focused(bool)` and emit FocusGained/FocusLost events to the renderer.

## Acceptance Criteria

## Acceptance Criteria

## Acceptance Criteria

## Acceptance Criteria

## Acceptance Criteria

- [ ] Handle `WindowEvent::Focused(true)` → emit `FocusGained`
- [ ] Handle `WindowEvent::Focused(false)` → emit `FocusLost`
- [ ] FocusGained clears any active `::on-blur` override
- [ ] FocusGained can trigger `::on-focus` override (if configured)
- [ ] Works per-window in multi-window scenarios

## Implementation Notes

### File: `src/main.rs`

In the event loop, handle focus events:
```rust
WindowEvent::Focused(focused) => {
    let event = if focused {
        TerminalEvent::FocusGained
    } else {
        TerminalEvent::FocusLost
    };
    state.gpu.effects_renderer.trigger_event(event, &state.theme);
}
```

Note: Focus events bypass crt-core entirely - they come from the window system, not terminal escape sequences.

### Dependencies
- CRT-T-0139 (renderer has trigger_event method)

## Status Updates

*To be added during implementation*